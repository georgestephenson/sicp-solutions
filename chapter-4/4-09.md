# Exercise 4.9

I will take two examples from C and make Scheme versions: `while` and `for`.

In a `while` loop, a condition is checked before executing the body. After executing the body, the cycle repeats until the condition is false.

``` Scheme
(while (< x 10) ; condition
  (begin        ; body
    (newline)
    (display x)
    (set! x (+ x 1))))
;0
;1
;2
;3
;4
;5
;6
;7
;8
;9
```

Using derived expressions this would be equivalent to:

``` Scheme
(let loop ()
  (if (< x 10) ; condition
      (begin
        (begin ; body
          (newline)
          (display x)
          (set! x (+ x 1)))
        (loop))))
;0
;1
;2
;3
;4
;5
;6
;7
;8
;9
```

A `for` loop is similar but has an initialisation, condition and an updation. To simplify it, I'll assume only one variable is initialised, so only need some initial value, and that the condition and updation produce procedures that take the initialised variable as an argument.

``` Scheme
(for 10                   ; initialisation
     (lambda (x) (> x 0)) ; condition
     (lambda (x) (- x 1)) ; updation
     (begin               ; body
      (newline)
      (display x)))
;10
;9
;8
;7
;6
;5
;4
;3
;2
;1
```

Using derived expressions this would be equivalent to:

``` Scheme
(let ((i 10))                               ; initialisation
  (let loop ()
    (if ((lambda (x) (> x 0)) i)            ; condition
        (begin
          (begin                            ; body
            (newline)
            (display x))
          (set! i ((lambda (x) (- x 1)) i)) ; updation
          (loop)))))
;10
;9
;8
;7
;6
;5
;4
;3
;2
;1
```

In both cases, all the parameters can be substituted into existing Scheme syntax that is equivalent. So my interpretations of `while` and `for` can both be implemented in terms of derived expressions.